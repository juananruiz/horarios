<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Datos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="controls">
            <a href="index.html" class="nav-button">üìÖ Ver por Grupo</a>
            <a href="horario-profesores.html" class="nav-button">üßë‚Äçüè´ Ver por Profesor</a>
            <a href="horario-completo.html" class="nav-button">üìä Horario Completo</a>
            
            <div style="flex: 1;"></div> <!-- Spacer -->
            
            <button id="exportBtn" class="nav-button">üíæ Exportar</button>
            <button id="importBtn" class="nav-button">üìÇ Importar</button>
            <input type="file" id="importFile" style="display:none" accept=".json">
        </div>
        <h1>‚úçÔ∏è Gesti√≥n de Datos</h1>

        <main style="display: flex; gap: 24px; flex-wrap: wrap;">

            <!-- Columna de Profesores -->
            <div id="teacher-management-card" class="card" style="flex: 1; min-width: 300px;">
                <h2>Profesores</h2>
                <div id="teacher-list" style="margin-bottom: 16px;">
                    <!-- La lista de profesores se renderizar√° aqu√≠ -->
                </div>
                
                <h3>A√±adir / Modificar Profesor</h3>
                <div class="form-group">
                    <label for="new-teacher-name">Nombre del Profesor</label>
                    <input type="text" id="new-teacher-name" placeholder="Ej: Juan P√©rez">
                </div>
                <div class="form-group">
                    <label for="new-teacher-id">ID (m√°x 5, para ordenar)</label>
                    <input type="text" id="new-teacher-id" placeholder="Ej: JP" maxlength="5">
                </div>
                <button id="add-teacher-btn" class="button">A√±adir Profesor</button>
            </div>

            <!-- Columna de Grupos -->
            <div id="group-management-card" class="card" style="flex: 2; min-width: 400px;">
                <div style="display: flex; gap: 16px;">
                    <div id="group-list-container" style="flex: 1;">
                        <h2>Grupos</h2>
                        <div id="group-list"></div>
                        <button id="new-group-btn" class="button" style="margin-top: 16px;">Nuevo Grupo</button>
                    </div>
            
                    <div id="group-details-container" style="flex: 2;">
                        <h2 id="details-title">Detalles del Grupo</h2>
                        <form id="group-form">
                            <div class="form-group">
                                <label for="group-name">Nombre del Grupo:</label>
                                <input type="text" id="group-name" required>
                            </div>
                            <div class="form-group">
                                <label for="group-order">Orden:</label>
                                <input type="number" id="group-order" style="width: 80px;">
                            </div>
                            <div class="form-group">
                                <label for="group-tutor">Tutor:</label>
                                <select id="group-tutor" required></select>
                            </div>
                            
                            <h3>Asignaturas</h3>
                            <table id="subjects-table" class="schedule-table">
                                <thead>
                                    <tr>
                                        <th>Asignatura</th>
                                        <th>Profesor</th>
                                        <th>Horas</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="subjects-tbody"></tbody>
                            </table>
                            <div class="form-group" style="display: flex; gap: 10px; margin-top: 10px; align-items: flex-end;">
                                <div style="flex: 2;">
                                    <label for="new-subject-name">Nombre Asignatura</label>
                                    <input type="text" id="new-subject-name" placeholder="Nombre">
                                </div>
                                <div style="flex: 2;">
                                    <label for="new-subject-teacher">Profesor</label>
                                    <select id="new-subject-teacher"></select>
                                </div>
                                <div style="flex: 1;">
                                    <label for="new-subject-hours">Horas</label>
                                    <input type="number" id="new-subject-hours" placeholder="Horas" step="0.25">
                                </div>
                                <button type="button" id="add-subject-btn" class="button">A√±adir</button>
                            </div>
            
                            <hr style="margin: 24px 0;">
                            <button type="submit" class="button">Guardar Cambios del Grupo</button>
                            <button type="button" id="delete-group-btn" class="button-danger">Eliminar Grupo</button>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="scripts.js"></script>
    <script src="gestion-datos.js"></script>
    <script>
        // Marcar bot√≥n de navegaci√≥n activo
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                if (button.href && button.href.includes(currentPage)) {
                    button.classList.add('active');
                }
            });
            
            // Inicializar botones de exportar/importar
            initializeAppData();
            addEventListeners();
        });
    </script>
</body>
</html>
